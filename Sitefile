
SITE.user = "gaslight"
SITE.host = "stage.budgetsketch.com"
SITE.port = 1970
# SITE.remote_dir = "/var/www/stage.gaslightsoftware.com/releases/webby/public"

task :default => :build

namespace :deploy do

  task :staging do
    SITE.remote_dir = "/var/www/stage.gaslightsoftware.com/releases/webby/public"
    ["deploy:clean",:build,"deploy:rcp"].each { |task| Rake::Task[task].execute() }
  end
  
  task :production do
    SITE.remote_dir = "/var/www/www.gaslightsoftware.com"
    ["deploy:clean",:build,"deploy:rcp"].each { |task| Rake::Task[task].execute() }
  end

  desc 'deploy files using rcp'
  task :rcp do
    system "scp -P #{SITE.port} -r output #{SITE.user}@#{SITE.host}:#{SITE.remote_dir}"
  end

  desc 'clean the output folder'
  task :clean do
    system "rm -rf output"
  end
end
